<div data-nested-form-target="item"
     class="mb-4 border rounded bg-gray-50 relative overflow-hidden">

  <%= f.hidden_field :_destroy %>
  <%= f.hidden_field :type %>

  <div class="flex items-stretch border-b">
    <div class="flex-grow">
      <%= f.panel_field :title,
            placeholder: "Nom de la section" %>
    </div>

    <button type="button"
            data-accordion-target="toggle"
            data-action="accordion#toggle"
            aria-expanded="false"
            class="flex items-center px-3 bg-white hover:bg-gray-50 focus:bg-gray-200 border-l">
      <i data-accordion-target="icon"
         class="fa-solid fa-chevron-down transition-transform duration-200"></i>
    </button>

    <button type="button"
            data-action="nested-form#remove"
            class="flex items-center px-3 bg-white text-red-600 hover:bg-red-50 border-l">
      <i class="fa-solid fa-trash-can"></i>
    </button>
  </div>

  <div data-accordion-target="panel" class="transition-all overflow-hidden">
    <div class="p-4 space-y-4" data-nested-form-target="dynamic">
      <% if f.object.type == "CardContent" %>
        <%= render "admin/cards/content/fields", f: f %>
      <% elsif f.object.type == "CardMenu" %>
        <%= render "admin/cards/menu/fields", f: f %>
      <% end %>
    </div>
  </div>
</div>
